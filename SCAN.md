# 遍历接口说明

对于所有遍历接口，可以提供条件进行查询，也可以对查询结果进行分页返回。

## URL参数

要进行条件查询或分页查询，需要在请求的URL后面携带以下参数：

参数 | 类型 | 必填 | 说明
---|---|---|---
offset | int | 否 | 偏移，必须大于等于0
limit | int | 否 | 限制返回条数，必须大于等于0，如果存在`offset`则必须存在`limit`
where | string | 否 | 条件，对条件数组进行BASE64编码后的结果

### where条件

`where`是一个条件对象数组，每个条件之间是 `与` 关系，条件对象的字段如下：

参数 | 类型 | 必填 | 说明
---|---|---|---
name | string | 是 | 字段名称，允许的字段参见具体的接口文档
value | 以具体字段为准 | 是 | 字段值
oper | string | 是 | 操作符

#### `oper`操作符 

- `eq`: 等于
- `ne`: 不等于
- `lt`: 小于
- `lte`: 小于等于
- `gt`: 大于
- `gte`: 大于等于
- `regex`: 正则匹配，目前只支持通配符匹配，后端会转化为数据库的`LIKE`操作

#### 示例

比如要查询`name`包含`张`，`age`大于`18`的用户，则构造如下数组对象:
```
[
  {
    "name": "name",
    "value": "张",
    "oper": "regex"
  },
  {
    "name": "age",
    "value": 18,
    "oper": "gt"
  }
]
```
注意：`where`字段需要将以上构造的数组对象的字符串进行BASE64编码后放在URL中。

## 返回参数

对于遍历接口，有统一的回复格式：

参数 | 类型 | 必填 | 说明
---|---|---|---
offset | int | URL参数中的offset值，提供了则有，不提供则无
limit | int | URL参数中的limit值，提供了则有，不提供则无
total | int | 查询总数
results | array | 查询结果数组

```
{
  "results": [
    {
      ...
    },
    {
      ...
    }
  ],
  "limit": 10,
  "offset": 0,
  "total": 2
}
```